<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://dudukling.github.io/my-blog/blog</id>
    <title>Dudu's Blog Blog</title>
    <updated>2023-03-08T00:00:00.000Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://dudukling.github.io/my-blog/blog"/>
    <subtitle>Dudu's Blog Blog</subtitle>
    <icon>https://dudukling.github.io/my-blog/img/favicon.ico</icon>
    <entry>
        <title type="html"><![CDATA[Git change old commit messages]]></title>
        <id>https://dudukling.github.io/my-blog/blog/git-change-old-commit-messages</id>
        <link href="https://dudukling.github.io/my-blog/blog/git-change-old-commit-messages"/>
        <updated>2023-03-08T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[If a commit message contains unclear, incorrect, or sensitive information, you can change and push the new message.]]></summary>
        <content type="html"><![CDATA[<p>If a commit message contains unclear, incorrect, or sensitive information, you can change and push the new message.</p><p>It is strongly discouraged force pushing, since this changes the history of your repository. If you force push, people who have already cloned your repository will have to manually fix their local history.</p><div class="theme-admonition theme-admonition-danger alert alert--danger admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>Warning</div><div class="admonitionContent_S0QG"><p>This changes the history of your repository and can cause some unexpected side effects, be careful.</p></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="amending-older-or-multiple-commit-messages">Amending older or multiple commit messages<a href="#amending-older-or-multiple-commit-messages" class="hash-link" aria-label="Direct link to Amending older or multiple commit messages" title="Direct link to Amending older or multiple commit messages">​</a></h2><p>To change the message of older or multiple commit messages, use interactive rebase, then force push to change the commit history.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="start-rebase">Start rebase<a href="#start-rebase" class="hash-link" aria-label="Direct link to Start rebase" title="Direct link to Start rebase">​</a></h3><p>Use the command below to display a list of the last <code>n</code> commits in your default text editor.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">git</span><span class="token plain"> rebase -i HEAD~n</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>With:</p><ul><li><code>n</code>: Number of commits from the last commit of the <code>HEAD</code>.</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="find-the-last-commit">Find the last commit<a href="#find-the-last-commit" class="hash-link" aria-label="Direct link to Find the last commit" title="Direct link to Find the last commit">​</a></h4><p>To get the exact number of <code>n</code> to reach the commit you want to change, you can use the command:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">git rev-list HEAD --count</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> - </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">git rev-list </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">COMMIT_SHA</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> --count</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> + </span><span class="token number" style="color:#36acaa">1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>With:</p><ul><li><code>COMMIT_SHA</code>: The hash of the commit you want to get.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="select-commits-to-change">Select commits to change<a href="#select-commits-to-change" class="hash-link" aria-label="Direct link to Select commits to change" title="Direct link to Select commits to change">​</a></h3><p>Then, <code>Vim</code> will open with a list of commits and some other info, like this:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pick e499d89 Delete CNAME</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pick 0c39034 Better README</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pick f7fde4a Change the commit message but push the same commit.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Rebase 9fdb3bd..f7fde4a onto 9fdb3bd</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Commands:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># p, pick = use commit</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You need to change the word <code>pick</code> with <code>reword</code> before each commit message you want to change.</p><p>To do that, first you need to enter in <code>INSERT MODE</code>, change what you want and then save, using the <code>COMMAND MODE</code> in <a href="#about-vim">Vim</a>.</p><p>When you finish editing, save and close the commit list file.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="change-commits-selected">Change commits selected<a href="#change-commits-selected" class="hash-link" aria-label="Direct link to Change commits selected" title="Direct link to Change commits selected">​</a></h3><p>Then, for each commit you added <code>reword</code> to, will pop up and you can change the commit message to a new commit message.</p><p>Again, you will need to enter in <code>INSERT MODE</code>, change what you want and then save, using the <code>COMMAND MODE</code> in <a href="#about-vim">Vim</a>.</p><p>When finished, save the file and close it.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="push-changes">Push changes<a href="#push-changes" class="hash-link" aria-label="Direct link to Push changes" title="Direct link to Push changes">​</a></h3><p>When you're ready to push your changes to the remote, use the push --force command to force push over the old commit.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">git</span><span class="token plain"> push --force origin </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">BRANCH</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="about-vim">About Vim<a href="#about-vim" class="hash-link" aria-label="Direct link to About Vim" title="Direct link to About Vim">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="insert-mode">Insert mode<a href="#insert-mode" class="hash-link" aria-label="Direct link to Insert mode" title="Direct link to Insert mode">​</a></h3><p>This mode allows you to enter text into your document.</p><p>You can enter insert mode by pressing the <code>i</code> key.</p><p>Keep in mind that to save your document, you'll need to go back to <code>command mode</code> since only text input is allowed in this mode.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="command-mode">Command mode<a href="#command-mode" class="hash-link" aria-label="Direct link to Command mode" title="Direct link to Command mode">​</a></h3><p>This is the default mode that you'll be in once you open Vim.</p><p>This mode allows you to use Vim commands and move through your document.</p><p>If you're in a different mode and want to go back to command mode, just hit the <code>Escape</code> key.</p><p>From command mode, you can also use last-line commands, which generally start with the use of a colon.</p><p>For example:</p><ul><li><code>:q</code>: Allows you to exit Vim.</li><li><code>:q!</code> Quit without saving the file.</li><li><code>:w</code>: Saves your file.</li><li><code>:wq</code> Save your file and close Vim.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="reference">Reference<a href="#reference" class="hash-link" aria-label="Direct link to Reference" title="Direct link to Reference">​</a></h2><ul><li><a href="https://docs.github.com/en/pull-requests/committing-changes-to-your-project/creating-and-editing-commits/changing-a-commit-message" target="_blank" rel="noopener noreferrer">Github Docs - Changing a commit message</a>.</li><li><a href="https://stackoverflow.com/questions/677436/how-do-i-get-the-git-commit-count" target="_blank" rel="noopener noreferrer">StackOverflow - How do i get the git commit count</a>.</li><li><a href="https://www.keycdn.com/blog/vim-commands" target="_blank" rel="noopener noreferrer">KeyCDN - Vim commands</a>.</li></ul>]]></content>
        <author>
            <name>Dudu Kling</name>
            <uri>https://github.com/DuduKling</uri>
        </author>
        <category label="git" term="git"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Git Remove from History]]></title>
        <id>https://dudukling.github.io/my-blog/blog/git-remove-from-history</id>
        <link href="https://dudukling.github.io/my-blog/blog/git-remove-from-history"/>
        <updated>2022-05-01T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[To remove a line or a file from git commit history.]]></summary>
        <content type="html"><![CDATA[<p>To remove a line or a file from git commit history.</p><div class="theme-admonition theme-admonition-danger alert alert--danger admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>Warning</div><div class="admonitionContent_S0QG"><p>This changes the history of your repository and can cause some unexpected side effects, be careful.</p></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="remove-a-line-from-all-history">Remove a line from all history<a href="#remove-a-line-from-all-history" class="hash-link" aria-label="Direct link to Remove a line from all history" title="Direct link to Remove a line from all history">​</a></h2><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">git</span><span class="token plain"> filter-branch -f --tree-filter </span><span class="token string" style="color:#e3116c">'test -f [FILE_PATH] &amp;&amp; sed -i.bak "/[FIND]/d" [FILE_PATH] || echo “skipping file“'</span><span class="token plain"> -- --all</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This command generates a <code>.bak</code> file that should be removed too.</p><p>Reference: <a href="https://stackoverflow.com/questions/7194939/git-change-one-line-in-file-for-the-complete-history" target="_blank" rel="noopener noreferrer">StackOverflow - Git change one line in file for the complete history</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="substitute-a-string-from-all-history">Substitute a string from all history<a href="#substitute-a-string-from-all-history" class="hash-link" aria-label="Direct link to Substitute a string from all history" title="Direct link to Substitute a string from all history">​</a></h2><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">git</span><span class="token plain"> filter-branch -f --tree-filter </span><span class="token string" style="color:#e3116c">'test -f [FILE_PATH] &amp;&amp; sed -i.bak "s/[FIND]/[SUBSTITUTE]/g" [FILE_PATH] || echo “skipping file“'</span><span class="token plain"> -- --all</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This command generates a <code>.bak</code> file that should be removed too.</p><p>Reference: <a href="https://www.geeksforgeeks.org/sed-command-in-linux-unix-with-examples/" target="_blank" rel="noopener noreferrer">GeeksForGeeks - Sed command in linux unix with examples</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="remove-a-file-from-all-history">Remove a file from all history<a href="#remove-a-file-from-all-history" class="hash-link" aria-label="Direct link to Remove a file from all history" title="Direct link to Remove a file from all history">​</a></h2><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">git</span><span class="token plain"> filter-branch -f --index-filter </span><span class="token string" style="color:#e3116c">'git rm -rf --cached --ignore-unmatch [FILE_PATH]'</span><span class="token plain"> HEAD</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Reference: <a href="https://stackoverflow.com/questions/43762338/how-to-remove-file-from-git-history" target="_blank" rel="noopener noreferrer">StackOverflow - How to remove file from git history</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="publish-modifications">Publish modifications<a href="#publish-modifications" class="hash-link" aria-label="Direct link to Publish modifications" title="Direct link to Publish modifications">​</a></h2><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">git</span><span class="token plain"> push --force --all</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>]]></content>
        <author>
            <name>Dudu Kling</name>
            <uri>https://github.com/DuduKling</uri>
        </author>
        <category label="git" term="git"/>
    </entry>
</feed>