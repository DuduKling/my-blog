"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[574],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>h});var o=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function r(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},i=Object.keys(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var m=o.createContext({}),s=function(e){var t=o.useContext(m),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},c=function(e){var t=s(e.components);return o.createElement(m.Provider,{value:t},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},p=o.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,m=e.parentName,c=r(e,["components","mdxType","originalType","parentName"]),u=s(n),p=a,h=u["".concat(m,".").concat(p)]||u[p]||d[p]||i;return n?o.createElement(h,l(l({ref:t},c),{},{components:n})):o.createElement(h,l({ref:t},c))}));function h(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,l=new Array(i);l[0]=p;var r={};for(var m in t)hasOwnProperty.call(t,m)&&(r[m]=t[m]);r.originalType=e,r[u]="string"==typeof e?e:a,l[1]=r;for(var s=2;s<i;s++)l[s]=n[s];return o.createElement.apply(null,l)}return o.createElement.apply(null,n)}p.displayName="MDXCreateElement"},5469:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>m,contentTitle:()=>l,default:()=>d,frontMatter:()=>i,metadata:()=>r,toc:()=>s});var o=n(7462),a=(n(7294),n(3905));const i={slug:"git-change-old-commit-messages",title:"Git change old commit messages",authors:["dudu"],tags:["git"]},l=void 0,r={permalink:"/blog/git-change-old-commit-messages",source:"@site/blog/2023-03-08-git-change-old-commit-messages.md",title:"Git change old commit messages",description:"If a commit message contains unclear, incorrect, or sensitive information, you can change and push the new message.",date:"2023-03-08T00:00:00.000Z",formattedDate:"March 8, 2023",tags:[{label:"git",permalink:"/blog/tags/git"}],readingTime:2.79,hasTruncateMarker:!1,authors:[{name:"Dudu Kling",title:"Blog Owner",url:"https://github.com/DuduKling",imageURL:"https://dudukling.github.io/assets/images/avatar.png",key:"dudu"}],frontMatter:{slug:"git-change-old-commit-messages",title:"Git change old commit messages",authors:["dudu"],tags:["git"]},nextItem:{title:"Git Remove from History",permalink:"/blog/git-remove-from-history"}},m={authorsImageUrls:[void 0]},s=[{value:"Amending older or multiple commit messages",id:"amending-older-or-multiple-commit-messages",level:2},{value:"Start rebase",id:"start-rebase",level:3},{value:"Find the last commit",id:"find-the-last-commit",level:4},{value:"Select commits to change",id:"select-commits-to-change",level:3},{value:"Change commits selected",id:"change-commits-selected",level:3},{value:"Push changes",id:"push-changes",level:3},{value:"About Vim",id:"about-vim",level:2},{value:"Insert mode",id:"insert-mode",level:3},{value:"Command mode",id:"command-mode",level:3},{value:"Reference",id:"reference",level:2}],c={toc:s},u="wrapper";function d(e){let{components:t,...n}=e;return(0,a.kt)(u,(0,o.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"If a commit message contains unclear, incorrect, or sensitive information, you can change and push the new message."),(0,a.kt)("p",null,"It is strongly discouraged force pushing, since this changes the history of your repository. If you force push, people who have already cloned your repository will have to manually fix their local history."),(0,a.kt)("admonition",{title:"Warning",type:"danger"},(0,a.kt)("p",{parentName:"admonition"},"This changes the history of your repository and can cause some unexpected side effects, be careful.")),(0,a.kt)("h2",{id:"amending-older-or-multiple-commit-messages"},"Amending older or multiple commit messages"),(0,a.kt)("p",null,"To change the message of older or multiple commit messages, use interactive rebase, then force push to change the commit history."),(0,a.kt)("h3",{id:"start-rebase"},"Start rebase"),(0,a.kt)("p",null,"Use the command below to display a list of the last ",(0,a.kt)("inlineCode",{parentName:"p"},"n")," commits in your default text editor."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"git rebase -i HEAD~n\n")),(0,a.kt)("p",null,"With:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"n"),": Number of commits from the last commit of the ",(0,a.kt)("inlineCode",{parentName:"li"},"HEAD"),".")),(0,a.kt)("h4",{id:"find-the-last-commit"},"Find the last commit"),(0,a.kt)("p",null,"To get the exact number of ",(0,a.kt)("inlineCode",{parentName:"p"},"n")," to reach the commit you want to change, you can use the command:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"(git rev-list HEAD --count) - (git rev-list [COMMIT_SHA] --count) + 1\n")),(0,a.kt)("p",null,"With:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"COMMIT_SHA"),": The hash of the commit you want to get.")),(0,a.kt)("h3",{id:"select-commits-to-change"},"Select commits to change"),(0,a.kt)("p",null,"Then, ",(0,a.kt)("inlineCode",{parentName:"p"},"Vim")," will open with a list of commits and some other info, like this:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"...\npick e499d89 Delete CNAME\npick 0c39034 Better README\npick f7fde4a Change the commit message but push the same commit.\n\n# Rebase 9fdb3bd..f7fde4a onto 9fdb3bd\n#\n# Commands:\n# p, pick = use commit\n...\n")),(0,a.kt)("p",null,"You need to change the word ",(0,a.kt)("inlineCode",{parentName:"p"},"pick")," with ",(0,a.kt)("inlineCode",{parentName:"p"},"reword")," before each commit message you want to change."),(0,a.kt)("p",null,"To do that, first you need to enter in ",(0,a.kt)("inlineCode",{parentName:"p"},"INSERT MODE"),", change what you want and then save, using the ",(0,a.kt)("inlineCode",{parentName:"p"},"COMMAND MODE")," in ",(0,a.kt)("a",{parentName:"p",href:"#about-vim"},"Vim"),"."),(0,a.kt)("p",null,"When you finish editing, save and close the commit list file."),(0,a.kt)("h3",{id:"change-commits-selected"},"Change commits selected"),(0,a.kt)("p",null,"Then, for each commit you added ",(0,a.kt)("inlineCode",{parentName:"p"},"reword")," to, will pop up and you can change the commit message to a new commit message."),(0,a.kt)("p",null,"Again, you will need to enter in ",(0,a.kt)("inlineCode",{parentName:"p"},"INSERT MODE"),", change what you want and then save, using the ",(0,a.kt)("inlineCode",{parentName:"p"},"COMMAND MODE")," in ",(0,a.kt)("a",{parentName:"p",href:"#about-vim"},"Vim"),"."),(0,a.kt)("p",null,"When finished, save the file and close it."),(0,a.kt)("h3",{id:"push-changes"},"Push changes"),(0,a.kt)("p",null,"When you're ready to push your changes to the remote, use the push --force command to force push over the old commit."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"git push --force origin [BRANCH]\n")),(0,a.kt)("h2",{id:"about-vim"},"About Vim"),(0,a.kt)("h3",{id:"insert-mode"},"Insert mode"),(0,a.kt)("p",null,"This mode allows you to enter text into your document."),(0,a.kt)("p",null,"You can enter insert mode by pressing the ",(0,a.kt)("inlineCode",{parentName:"p"},"i")," key."),(0,a.kt)("p",null,"Keep in mind that to save your document, you'll need to go back to ",(0,a.kt)("inlineCode",{parentName:"p"},"command mode")," since only text input is allowed in this mode."),(0,a.kt)("h3",{id:"command-mode"},"Command mode"),(0,a.kt)("p",null,"This is the default mode that you'll be in once you open Vim."),(0,a.kt)("p",null,"This mode allows you to use Vim commands and move through your document."),(0,a.kt)("p",null,"If you're in a different mode and want to go back to command mode, just hit the ",(0,a.kt)("inlineCode",{parentName:"p"},"Escape")," key."),(0,a.kt)("p",null,"From command mode, you can also use last-line commands, which generally start with the use of a colon."),(0,a.kt)("p",null,"For example:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},":q"),": Allows you to exit Vim."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},":q!")," Quit without saving the file."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},":w"),": Saves your file."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},":wq")," Save your file and close Vim.")),(0,a.kt)("h2",{id:"reference"},"Reference"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://docs.github.com/en/pull-requests/committing-changes-to-your-project/creating-and-editing-commits/changing-a-commit-message"},"Github Docs - Changing a commit message"),"."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://stackoverflow.com/questions/677436/how-do-i-get-the-git-commit-count"},"StackOverflow - How do i get the git commit count"),"."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://www.keycdn.com/blog/vim-commands"},"KeyCDN - Vim commands"),".")))}d.isMDXComponent=!0}}]);